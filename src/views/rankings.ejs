<div class="container py-4">
  <h1 class="mb-4">Card Art Rankings</h1>

  <div class="row gy-4">
    <!-- Top 20 Cards -->
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h2 class="h5 mb-0">Top 20 Card Art</h2>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
              <thead>
                <tr>
                  <th scope="col" style="width: 50px" class="text-center">#</th>
                  <th scope="col">Card</th>
                  <th scope="col" class="text-end">Rating</th>
                  <th scope="col" class="text-end">Votes</th>
                </tr>
              </thead>
              <tbody>
                <% topCards.forEach((card, index) => { %>
                <tr>
                  <td class="text-center align-middle"><%= index + 1 %></td>
                  <td>
                    <a
                      href="https://scryfall.com/card/<%= card.scryfallId %>"
                      class="d-flex align-items-center text-decoration-none"
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <img
                        src="<%= getArtCropUrl(card.scryfallId) %>"
                        alt="<%= card.name %>"
                        class="me-2 rounded"
                        style="width: 40px; height: 40px; object-fit: cover"
                        onerror="this.onerror=null; this.src='/api/card-back-thumb';"
                      />
                      <div>
                        <div class="fw-medium text-dark"><%= card.name %></div>
                        <small class="text-muted"
                          ><%= card.artist || 'Unknown artist' %></small
                        >
                      </div>
                    </a>
                  </td>
                  <td class="text-end align-middle">
                    <%= card.formattedRating %>
                  </td>
                  <td class="text-end align-middle"><%= card.comparisons %></td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Top 20 Artists Section -->
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h2 class="h5 mb-0">Top 20 Artists</h2>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
              <thead>
                <tr>
                  <th scope="col" class="text-center" style="width: 50px">#</th>
                  <th scope="col">Artist</th>
                  <th scope="col" class="text-end">Avg. Rating</th>
                  <th scope="col" class="text-center">Cards</th>
                </tr>
              </thead>
              <tbody>
                <% topArtists.forEach((artist, index) => { %>
                <tr>
                  <td class="text-center align-middle"><%= index + 1 %></td>
                  <td>
                    <div class="d-flex align-items-center">
                      <!-- Add thumbnail if available -->
                      <% if (artist.notableScryfallId) { %>
                      <img
                        src="<%= getArtCropUrl(artist.notableScryfallId) %>"
                        alt="Art by <%= artist.name %>"
                        class="me-2 rounded"
                        style="width: 40px; height: 40px; object-fit: cover"
                        onerror="this.onerror=null; this.src='/api/card-back-thumb';"
                      />
                      <% } %>

                      <div>
                        <div class="fw-medium">
                          <%= artist.name || 'Unknown' %>
                        </div>
                        <small class="text-muted">
                          Notable: <% if (artist.notableScryfallId) { %>
                          <!-- Link to Scryfall if we have an ID -->
                          <a
                            href="https://scryfall.com/card/<%= artist.notableScryfallId %>"
                            target="_blank"
                            rel="noopener noreferrer"
                            ><%= artist.bestCard %></a
                          >
                          <% } else { %> <%= artist.bestCard %> <% } %>
                        </small>
                      </div>
                    </div>
                  </td>
                  <td class="text-end align-middle">
                    <%= artist.formattedRating ||
                    artist.averageRating.toLocaleString() %>
                  </td>
                  <td class="text-center align-middle">
                    <%= artist.totalCards %>
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="alert alert-info mt-4">
    <i class="bi bi-info-circle me-2"></i> Rankings are based on head-to-head
    voting. Artists need at least 3 cards to appear in the rankings.
  </div>
</div>
